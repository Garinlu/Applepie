<app-header></app-header>

<div class="container">
    <div *ngIf="business">
        <div class="jumbotron"><a class="btn btn-primary btn-lg" routerLink="/businesses" routerLinkActive="active"
                                  role="button">Retour aux chantiers</a>
            <h1 class="display-3">{{business.name}}</h1>
            <p class="lead">Description</p>
            <hr class="my-4">
            <p class="lead">

            </p>

        </div>
        <a class="btn btn-success btn-lg" [routerLink]="['/addBusinessProduct', business.id]"
           role="button">Ajouter un produit sur le chantier</a>

        <table class="table table-dark">
            <thead>
            <tr>
                <th>Nom du produit</th>
                <th>Quantité</th>
                <th>Prix</th>
            </tr>
            </thead>
            <tbody *ngFor="let productGroup of products" (click)="actionDetail(productGroup.name)">
            <tr>
                <td>{{productGroup.name}}</td>
                <td>{{productGroup.quantity}}</td>
                <td>{{productGroup.price}}€</td>
            </tr>
            <tr *ngIf="showDetails[productGroup.name]" class="nothover">
                <td></td>
                <td colspan="2">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Quantité</th>
                            <th>Prix</th>
                            <th>Date</th>
                            <th>User</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let product of productGroup.products">
                            <td>{{product.quantity}}</td>
                            <td>{{product.price}}€</td>
                            <td>{{product.creationDate | date:'dd/MM/yyyy'}}<br>
                            <i>{{product.creationDate | date:'HH:mm'}}</i></td>
                            <td>{{product.username}}</td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            </tbody>
        </table>

    </div>
</div>